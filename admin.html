<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ù‡ÙˆØ´Ù…Ù†Ø¯ | Ø¯Ú©ØªØ± ØºÙ„Ø§Ù…Ø±Ø¶Ø§ Ø±Ø¶Ø§Ø¦ÛŒ</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vazirmatn@33.003/font.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        :root {
            --primary: #0A2463;
            --secondary: #1A5276;
            --accent: #D4AF37;
            --success: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
            --light: #F8F9FA;
            --dark: #212529;
            --sidebar-width: 260px;
            --github: #333;
            --github-green: #238636;
            --github-purple: #8957e5;
            --literary-purple: #6A4C93;
            --justice-green: #27AE60;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Vazirmatn', sans-serif;
            background: #f5f7fa;
            color: #333;
            overflow-x: hidden;
        }
        
        /* ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯ */
        .login-page {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            padding: 20px;
        }
        
        .login-box {
            background: white;
            border-radius: 20px;
            padding: 40px;
            width: 100%;
            max-width: 450px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            text-align: center;
        }
        
        .login-box h1 {
            color: var(--primary);
            margin-bottom: 10px;
            font-size: 1.8rem;
        }
        
        .login-box .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 0.95rem;
        }
        
        .login-icon {
            font-size: 4rem;
            color: var(--accent);
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
            text-align: right;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary);
        }
        
        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-family: inherit;
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        .form-control:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(10,36,99,0.1);
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-family: inherit;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(10,36,99,0.2);
        }
        
        .btn-success {
            background: var(--success);
            color: white;
        }
        
        .btn-danger {
            background: var(--danger);
            color: white;
        }
        
        .btn-warning {
            background: var(--warning);
            color: var(--dark);
        }
        
        .btn-github {
            background: var(--github);
            color: white;
        }
        
        .btn-github-green {
            background: var(--github-green);
            color: white;
        }
        
        .btn-github-purple {
            background: var(--github-purple);
            color: white;
        }
        
        .btn-sm {
            padding: 8px 15px;
            font-size: 0.9rem;
        }
        
        /* ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ */
        .admin-page { display: none; }
        
        /* Ù†ÙˆØ§Ø± Ú©Ù†Ø§Ø±ÛŒ */
        .sidebar {
            position: fixed;
            right: 0;
            top: 0;
            width: var(--sidebar-width);
            height: 100vh;
            background: linear-gradient(180deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px 0;
            box-shadow: 5px 0 20px rgba(0,0,0,0.1);
            z-index: 1000;
            transition: transform 0.3s;
        }
        
        .sidebar-header {
            padding: 0 20px 30px;
            text-align: center;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .sidebar-menu {
            list-style: none;
            padding: 20px 0;
        }
        
        .sidebar-menu li { margin-bottom: 5px; }
        
        .sidebar-menu a {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 20px;
            color: rgba(255,255,255,0.9);
            text-decoration: none;
            transition: all 0.3s;
            font-size: 0.95rem;
        }
        
        .sidebar-menu a:hover,
        .sidebar-menu a.active {
            background: rgba(255,255,255,0.1);
            color: white;
            border-right: 4px solid var(--accent);
        }
        
        /* Ù…Ø­ØªÙˆØ§ÛŒ Ø§ØµÙ„ÛŒ */
        .main-content {
            margin-right: var(--sidebar-width);
            padding: 20px;
            min-height: 100vh;
        }
        
        .top-bar {
            background: white;
            border-radius: 15px;
            padding: 15px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .top-bar h1 {
            font-size: 1.5rem;
            color: var(--primary);
        }
        
        /* ÙØ±Ù…â€ŒÙ‡Ø§ */
        .form-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            margin-bottom: 30px;
        }
        
        .form-section h2 {
            color: var(--primary);
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f7ff;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-full { grid-column: 1 / -1; }
        
        textarea.form-control {
            min-height: 150px;
            resize: vertical;
            font-family: 'Vazirmatn', monospace;
        }
        
        .form-actions {
            display: flex;
            gap: 15px;
            justify-content: flex-start;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #f0f7ff;
        }
        
        /* Ù…Ø¯Ø§Ù„ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .modal.active { display: flex; }
        
        .modal-content {
            background: white;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        /* ØªØ¨â€ŒÙ‡Ø§ */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            border-bottom: 2px solid #f0f7ff;
            padding-bottom: 5px;
        }
        
        .tab-btn {
            padding: 10px 25px;
            background: none;
            border: none;
            border-radius: 10px 10px 0 0;
            font-weight: 600;
            color: #666;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }
        
        .tab-btn.active {
            color: var(--primary);
            background: #f0f7ff;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ */
        .preview-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            margin-top: 30px;
        }
        
        .preview-container {
            border: 2px dashed #e2e8f0;
            border-radius: 10px;
            padding: 25px;
            background: #f8fafc;
            min-height: 200px;
            overflow: auto;
        }
        
        /* Ø¬Ø¯Ø§ÙˆÙ„ */
        .table-container {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            margin-bottom: 30px;
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 15px;
            text-align: right;
            border-bottom: 1px solid #eee;
        }
        
        th {
            background: #f8f9fa;
            color: var(--primary);
            font-weight: 600;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        .actions {
            display: flex;
            gap: 8px;
        }
        
        .status {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .status.published {
            background: rgba(40,167,69,0.1);
            color: var(--success);
        }
        
        .status.draft {
            background: rgba(255,193,7,0.1);
            color: var(--warning);
        }
        
        .status.synced {
            background: rgba(137,87,229,0.1);
            color: var(--github-purple);
        }
        
        /* Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§ */
        .alert {
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .alert-success {
            background: rgba(40,167,69,0.1);
            color: var(--success);
            border-right: 4px solid var(--success);
        }
        
        .alert-error {
            background: rgba(220,53,69,0.1);
            color: var(--danger);
            border-right: 4px solid var(--danger);
        }
        
        .alert-info {
            background: rgba(23,162,184,0.1);
            color: #17a2b8;
            border-right: 4px solid #17a2b8;
        }
        
        .alert-warning {
            background: rgba(255,193,7,0.1);
            color: var(--warning);
            border-right: 4px solid var(--warning);
        }
        
        /* Ú¯ÛŒØªâ€ŒÙ‡Ø§Ø¨ Ø§Ø³ØªØ§ØªÙˆØ³ */
        .github-status {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border-right: 4px solid var(--github-purple);
        }
        
        .github-status-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .github-status-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        
        .github-status-item:last-child {
            border-bottom: none;
        }
        
        .github-status-label {
            color: #666;
        }
        
        .github-status-value {
            font-weight: 600;
            color: var(--primary);
        }
        
        .github-status-value.connected {
            color: var(--success);
        }
        
        .github-status-value.disconnected {
            color: var(--danger);
        }
        
        /* Ù…Ø®ÙÛŒ/Ù†Ù…Ø§ÛŒØ´ÛŒ */
        .hidden { display: none !important; }
        
        .page-section {
            display: none;
        }
        
        .page-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @media (max-width: 992px) {
            .sidebar { transform: translateX(100%); }
            .sidebar.active { transform: translateX(0); }
            .main-content { margin-right: 0; }
        }
        
        @media (max-width: 768px) {
            .form-row { grid-template-columns: 1fr; }
            .form-actions { flex-direction: column; }
            .btn { width: 100%; }
        }
    </style>
</head>
<body>
    <!-- Ù…Ø¯Ø§Ù„ ØªÙ†Ø¸ÛŒÙ…Ø§Øª GitHub -->
    <div class="modal" id="githubConfigModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title"><i class="fab fa-github"></i> ØªÙ†Ø¸ÛŒÙ…Ø§Øª GitHub</h3>
                <button class="modal-close" id="closeConfigModal">&times;</button>
            </div>
            
            <div class="alert alert-info">
                <i class="fas fa-info-circle"></i>
                ØªÙˆÚ©Ù† GitHub Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯
            </div>
            
            <div class="form-group">
                <label>GitHub Token *</label>
                <input type="password" id="githubToken" class="form-control" placeholder="ghp_xxxxxxxxxxxxxxxxxxxx" required>
            </div>
            
            <div class="form-group">
                <label>Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ *</label>
                <input type="text" id="githubUsername" class="form-control" placeholder="ghrezaei1399-code" required>
            </div>
            
            <div class="form-group">
                <label>Ù†Ø§Ù… Ø±ÛŒÙ¾Ø§Ø²ÛŒØªÙˆØ±ÛŒ *</label>
                <input type="text" id="githubRepo" class="form-control" placeholder="ghrezaei1399.github.io" required>
            </div>
            
            <div class="form-group">
                <label>Ø´Ø§Ø®Ù‡ *</label>
                <input type="text" id="githubBranch" class="form-control" value="main" required>
            </div>
            
            <div class="form-group">
                <label>ÙØ§ÛŒÙ„ ÙØ§Ø±Ø³ÛŒ (Ù…Ø«Ù„Ø§: index.html)</label>
                <input type="text" id="githubPathFa" class="form-control" value="index.html">
            </div>
            
            <div class="form-group">
                <label>ÙØ§ÛŒÙ„ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ (Ù…Ø«Ù„Ø§: en.html)</label>
                <input type="text" id="githubPathEn" class="form-control" value="en.html">
            </div>
            
            <div class="form-actions">
                <button class="btn btn-github" id="testGithubConnection">
                    <i class="fab fa-github"></i> ØªØ³Øª Ø§ØªØµØ§Ù„
                </button>
                <button class="btn btn-success" id="saveGithubConfig">
                    <i class="fas fa-save"></i> Ø°Ø®ÛŒØ±Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª
                </button>
            </div>
        </div>
    </div>

    <!-- ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯ -->
    <div class="login-page" id="loginPage">
        <div class="login-box">
            <div class="login-icon">
                <i class="fas fa-lock"></i>
            </div>
            <h1>ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ù‡ÙˆØ´Ù…Ù†Ø¯</h1>
            <p class="subtitle">Ø¯Ú©ØªØ± ØºÙ„Ø§Ù…Ø±Ø¶Ø§ Ø±Ø¶Ø§Ø¦ÛŒ | ÛŒÚ©Ù¾Ø§Ø±Ú†Ù‡ Ø¨Ø§ GitHub</p>
            
            <form id="loginForm">
                <div class="form-group">
                    <label for="username">Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ</label>
                    <input type="text" id="username" class="form-control" placeholder="admin" required>
                </div>
                
                <div class="form-group">
                    <label for="password">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
                    <input type="password" id="password" class="form-control" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required>
                </div>
                
                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    <i class="fas fa-sign-in-alt"></i> ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ù¾Ù†Ù„
                </button>
            </form>
            
            <div class="alert alert-info" style="margin-top: 20px;">
                <i class="fas fa-info-circle"></i>
                Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ: <code>admin</code><br>
                Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±: <code>drrezaei2025</code>
            </div>
        </div>
    </div>
    
    <!-- ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ Ù¾Ù†Ù„ -->
    <div class="admin-page" id="adminPage">
        <!-- Ù†ÙˆØ§Ø± Ú©Ù†Ø§Ø±ÛŒ -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2>Ø¯Ú©ØªØ± Ø±Ø¶Ø§Ø¦ÛŒ</h2>
                <p>Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ù‡ÙˆØ´Ù…Ù†Ø¯</p>
                <div style="margin-top: 10px; font-size: 0.8rem; color: var(--accent);">
                    <i class="fas fa-brain"></i> Ù‡ÙˆØ´Ù…Ù†Ø¯Ø³Ø§Ø²ÛŒ Ú©Ø§Ù…Ù„
                </div>
            </div>
            
            <ul class="sidebar-menu">
                <li><a href="#" class="active" data-page="dashboard"><i class="fas fa-tachometer-alt"></i><span>Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</span></a></li>
                <li><a href="#" data-page="smartAdd"><i class="fas fa-magic"></i><span>Ø§ÙØ²ÙˆØ¯Ù† Ù‡ÙˆØ´Ù…Ù†Ø¯</span></a></li>
                <li><a href="#" data-page="editor"><i class="fas fa-edit"></i><span>ÙˆÛŒØ±Ø§ÛŒØ´Ú¯Ø± Ø³Ø§ÛŒØª</span></a></li>
                <li><a href="#" data-page="articles"><i class="fas fa-file-alt"></i><span>Ù…Ù‚Ø§Ù„Ø§Øª</span></a></li>
                <li><a href="#" data-page="books"><i class="fas fa-book"></i><span>Ú©ØªØ§Ø¨â€ŒÙ‡Ø§</span></a></li>
                <li><a href="#" data-page="notes"><i class="fas fa-sticky-note"></i><span>ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§</span></a></li>
                <li><a href="#" data-page="calls"><i class="fas fa-bullhorn"></i><span>ÙØ±Ø§Ø®ÙˆØ§Ù†â€ŒÙ‡Ø§</span></a></li>
                <li><a href="#" data-page="stats"><i class="fas fa-chart-bar"></i><span>Ø¢Ù…Ø§Ø±</span></a></li>
                <li><a href="#" data-page="github"><i class="fab fa-github"></i><span>ØªÙ†Ø¸ÛŒÙ…Ø§Øª GitHub</span></a></li>
                <li style="margin-top: 30px;"><a href="#" id="logoutBtn"><i class="fas fa-sign-out-alt"></i><span>Ø®Ø±ÙˆØ¬</span></a></li>
            </ul>
        </div>
        
        <!-- Ù…Ø­ØªÙˆØ§ÛŒ Ø§ØµÙ„ÛŒ -->
        <div class="main-content">
            <!-- Ù†ÙˆØ§Ø± Ø¨Ø§Ù„Ø§ÛŒÛŒ -->
            <div class="top-bar">
                <h1 id="pageTitle">Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</h1>
                
                <div class="user-info">
                    <button class="btn btn-github" id="configureGithubBtn">
                        <i class="fab fa-github"></i> ØªÙ†Ø¸ÛŒÙ…Ø§Øª GitHub
                    </button>
                    <button class="btn btn-primary" id="previewSiteBtn">
                        <i class="fas fa-eye"></i> Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ø³Ø§ÛŒØª
                    </button>
                </div>
            </div>
            
            <!-- Ø¨Ø®Ø´â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù -->
            <div id="pageContent">
                <!-- ========== Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ ========== -->
                <div class="page-section active" id="dashboardPage">
                    <div class="github-status">
                        <div class="github-status-header">
                            <i class="fab fa-github"></i>
                            <h4>ÙˆØ¶Ø¹ÛŒØª Ø§ØªØµØ§Ù„ GitHub</h4>
                            <button class="btn btn-sm btn-github" id="refreshGithubStatus">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                        <div class="github-status-item">
                            <span class="github-status-label">Ø§ØªØµØ§Ù„:</span>
                            <span class="github-status-value disconnected" id="githubConnectionStatus">Ù‚Ø·Ø¹</span>
                        </div>
                        <div class="github-status-item">
                            <span class="github-status-label">Ø±ÛŒÙ¾Ø§Ø²ÛŒØªÙˆØ±ÛŒ:</span>
                            <span class="github-status-value" id="githubRepoName">-</span>
                        </div>
                        <div class="github-status-item">
                            <span class="github-status-label">Ø¢Ø®Ø±ÛŒÙ† Ø§Ù†ØªØ´Ø§Ø±:</span>
                            <span class="github-status-value" id="githubLastPublish">-</span>
                        </div>
                    </div>
                    
                    <div class="alert alert-success">
                        <i class="fas fa-check-circle"></i>
                        <div>
                            <strong>Ø³ÛŒØ³ØªÙ… Ù‡ÙˆØ´Ù…Ù†Ø¯ ÙØ¹Ø§Ù„ Ø§Ø³Øª</strong><br>
                            Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ Ùˆ Ù…Ù‚Ø§Ù„Ø§Øª Ø¬Ø¯ÛŒØ¯ Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø¯Ø± Ø³Ø§ÛŒØª Ù…Ù†ØªØ´Ø± Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.
                        </div>
                    </div>
                </div>
                
                <!-- ========== Ø§ÙØ²ÙˆØ¯Ù† Ù‡ÙˆØ´Ù…Ù†Ø¯ ========== -->
                <div class="page-section" id="smartAddPage">
                    <div class="form-section">
                        <h2><i class="fas fa-magic"></i> Ø§ÙØ²ÙˆØ¯Ù† Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù…Ø­ØªÙˆØ§</h2>
                        
                        <div class="tabs">
                            <button class="tab-btn active" data-tab="smartBook">ğŸ“š Ú©ØªØ§Ø¨</button>
                            <button class="tab-btn" data-tab="smartArticle">ğŸ“„ Ù…Ù‚Ø§Ù„Ù‡</button>
                            <button class="tab-btn" data-tab="smartNote">ğŸ“ ÛŒØ§Ø¯Ø¯Ø§Ø´Øª</button>
                            <button class="tab-btn" data-tab="smartCall">ğŸ“¢ ÙØ±Ø§Ø®ÙˆØ§Ù†</button>
                        </div>
                        
                        <!-- ØªØ¨ Ú©ØªØ§Ø¨ -->
                        <div class="tab-content active" id="smartBook">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle"></i>
                                Ú©ØªØ§Ø¨ Ø¬Ø¯ÛŒØ¯ Ø¨Ù‡ Ú¯Ø§Ù„Ø±ÛŒØŒ Ø§Ø³Ù„Ø§ÛŒØ¯Ø´Ùˆ Ùˆ Ø¢Ù…Ø§Ø± Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
                            </div>
                            <div class="form-row">
                                <div class="form-group form-full">
                                    <label>Ø¹Ù†ÙˆØ§Ù† Ú©ØªØ§Ø¨ *</label>
                                    <input type="text" id="smartBookTitle" class="form-control" placeholder="Ø¹Ù†ÙˆØ§Ù† Ú©ØªØ§Ø¨">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Ù†ÙˆØ¹ Ú©ØªØ§Ø¨</label>
                                    <select id="smartBookType" class="form-control">
                                        <option value="Ø´Ø¹Ø±">Ø´Ø¹Ø±</option>
                                        <option value="Ø¯Ø§Ø³ØªØ§Ù†">Ø¯Ø§Ø³ØªØ§Ù†</option>
                                        <option value="Ù¾Ú˜ÙˆÙ‡Ø´ÛŒ">Ù¾Ú˜ÙˆÙ‡Ø´ÛŒ</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Ø³Ø§Ù„ Ø§Ù†ØªØ´Ø§Ø±</label>
                                    <input type="number" id="smartBookYear" class="form-control" value="1403">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group form-full">
                                    <label>ØªÙˆØ¶ÛŒØ­ Ù…Ø®ØªØµØ± *</label>
                                    <textarea id="smartBookDesc" class="form-control" rows="4" placeholder="ØªÙˆØ¶ÛŒØ­ Ú©ØªØ§Ø¨..."></textarea>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group form-full">
                                    <label>Ø¢Ø¯Ø±Ø³ Ø¹Ú©Ø³ Ø¬Ù„Ø¯ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)</label>
                                    <input type="text" id="smartBookImage" class="form-control" placeholder="https://...">
                                </div>
                            </div>
                            <div class="form-actions">
                                <button class="btn btn-github-purple" id="smartPublishBookBtn">
                                    <i class="fas fa-magic"></i> Ø§ÙØ²ÙˆØ¯Ù† Ù‡ÙˆØ´Ù…Ù†Ø¯ Ú©ØªØ§Ø¨
                                </button>
                            </div>
                        </div>
                        
                        <!-- ØªØ¨ Ù…Ù‚Ø§Ù„Ù‡ -->
                        <div class="tab-content" id="smartArticle">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle"></i>
                                Ù…Ù‚Ø§Ù„Ù‡ Ø¬Ø¯ÛŒØ¯ Ø¨Ù‡ ØªØ¨â€ŒÙ‡Ø§ÛŒ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ùˆ Ù†ØªØ§ÛŒØ¬ Ø¬Ø³ØªØ¬Ùˆ Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
                            </div>
                            <div class="form-row">
                                <div class="form-group form-full">
                                    <label>Ø¹Ù†ÙˆØ§Ù† Ù…Ù‚Ø§Ù„Ù‡ *</label>
                                    <input type="text" id="smartArticleTitle" class="form-control" placeholder="Ø¹Ù†ÙˆØ§Ù† Ù…Ù‚Ø§Ù„Ù‡">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</label>
                                    <select id="smartArticleCategory" class="form-control">
                                        <option value="tab1">Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ø§Ù†Ø³Ø§Ù†â€ŒÙ…Ø­ÙˆØ±</option>
                                        <option value="tab2">ØªØ­ÙˆÙ„ Ø³Ø§Ø²Ù…Ø§Ù†ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯</option>
                                        <option value="tab3">Ù…Ù‡Ù†Ø¯Ø³ÛŒ ÙØ±Ù‡Ù†Ú¯ÛŒ Ø¯ÛŒØ¬ÛŒØªØ§Ù„</option>
                                        <option value="tab4">Ù†Ø¸Ø±ÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ø´Ù†Ø§Ø®ØªÛŒ-Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>ØªØ§Ø±ÛŒØ® Ø§Ù†ØªØ´Ø§Ø±</label>
                                    <input type="date" id="smartArticleDate" class="form-control">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group form-full">
                                    <label>Ú©Ù„Ù…Ø§Øª Ú©Ù„ÛŒØ¯ÛŒ (Ø¨Ø§ Ú©Ø§Ù…Ø§ Ø¬Ø¯Ø§ Ú©Ù†ÛŒØ¯)</label>
                                    <input type="text" id="smartArticleKeywords" class="form-control" placeholder="Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ, ØªØ­ÙˆÙ„ Ø³Ø§Ø²Ù…Ø§Ù†ÛŒ, ...">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group form-full">
                                    <label>Ú†Ú©ÛŒØ¯Ù‡ Ù…Ù‚Ø§Ù„Ù‡ *</label>
                                    <textarea id="smartArticleAbstract" class="form-control" rows="6" placeholder="Ù…ØªÙ† Ú†Ú©ÛŒØ¯Ù‡..."></textarea>
                                </div>
                            </div>
                            <div class="form-actions">
                                <button class="btn btn-github-purple" id="smartPublishArticleBtn">
                                    <i class="fas fa-magic"></i> Ø§ÙØ²ÙˆØ¯Ù† Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù…Ù‚Ø§Ù„Ù‡
                                </button>
                            </div>
                        </div>
                        
                        <!-- ØªØ¨ ÛŒØ§Ø¯Ø¯Ø§Ø´Øª -->
                        <div class="tab-content" id="smartNote">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle"></i>
                                ÛŒØ§Ø¯Ø¯Ø§Ø´Øª Ø¬Ø¯ÛŒØ¯ Ø¨Ù‡ ØªØ§ÛŒÙ…â€ŒÙ„Ø§ÛŒÙ† Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
                            </div>
                            <div class="form-row">
                                <div class="form-group form-full">
                                    <label>Ø¹Ù†ÙˆØ§Ù† ÛŒØ§Ø¯Ø¯Ø§Ø´Øª *</label>
                                    <input type="text" id="smartNoteTitle" class="form-control" placeholder="Ø¹Ù†ÙˆØ§Ù† ÛŒØ§Ø¯Ø¯Ø§Ø´Øª">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group form-full">
                                    <label>ØªØ§Ø±ÛŒØ®</label>
                                    <input type="date" id="smartNoteDate" class="form-control">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group form-full">
                                    <label>Ù…ØªÙ† ÛŒØ§Ø¯Ø¯Ø§Ø´Øª *</label>
                                    <textarea id="smartNoteContent" class="form-control" rows="6" placeholder="Ù…ØªÙ† ÛŒØ§Ø¯Ø¯Ø§Ø´Øª..."></textarea>
                                </div>
                            </div>
                            <div class="form-actions">
                                <button class="btn btn-github-purple" id="smartPublishNoteBtn">
                                    <i class="fas fa-magic"></i> Ø§ÙØ²ÙˆØ¯Ù† Ù‡ÙˆØ´Ù…Ù†Ø¯ ÛŒØ§Ø¯Ø¯Ø§Ø´Øª
                                </button>
                            </div>
                        </div>
                        
                        <!-- ØªØ¨ ÙØ±Ø§Ø®ÙˆØ§Ù† -->
                        <div class="tab-content" id="smartCall">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle"></i>
                                ÙØ±Ø§Ø®ÙˆØ§Ù† Ø¬Ø¯ÛŒØ¯ Ø¨Ù‡ Ø¨Ø®Ø´ Ù‡Ù…Ú©Ø§Ø±ÛŒ Ø¬Ù‡Ø§Ù†ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
                            </div>
                            <div class="form-row">
                                <div class="form-group form-full">
                                    <label>Ø¹Ù†ÙˆØ§Ù† ÙØ±Ø§Ø®ÙˆØ§Ù† *</label>
                                    <input type="text" id="smartCallTitle" class="form-control" placeholder="Ø¹Ù†ÙˆØ§Ù† ÙØ±Ø§Ø®ÙˆØ§Ù†">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group form-full">
                                    <label>Ù…ØªÙ† ÙØ±Ø§Ø®ÙˆØ§Ù† *</label>
                                    <textarea id="smartCallDesc" class="form-control" rows="4" placeholder="Ù…ØªÙ† ØªÙˆØ¶ÛŒØ­Ø§Øª..."></textarea>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group form-full">
                                    <label>Ù‡Ø§ÛŒÙ„Ø§ÛŒØª (Ù†Ú©ØªÙ‡ Ø¨Ø±Ø¬Ø³ØªÙ‡)</label>
                                    <input type="text" id="smartCallHighlight" class="form-control" placeholder="Ù…ØªÙ† Ú©ÙˆØªØ§Ù‡ Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø¬Ø³ØªÙ‡â€ŒØ³Ø§Ø²ÛŒ">
                                </div>
                            </div>
                            <div class="form-actions">
                                <button class="btn btn-github-purple" id="smartPublishCallBtn">
                                    <i class="fas fa-magic"></i> Ø§ÙØ²ÙˆØ¯Ù† Ù‡ÙˆØ´Ù…Ù†Ø¯ ÙØ±Ø§Ø®ÙˆØ§Ù†
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ========== ÙˆÛŒØ±Ø§ÛŒØ´Ú¯Ø± Ø³Ø§ÛŒØª ========== -->
                <div class="page-section" id="editorPage">
                    <div class="form-section">
                        <h2><i class="fas fa-edit"></i> ÙˆÛŒØ±Ø§ÛŒØ´Ú¯Ø± Ù…Ø­ØªÙˆØ§ÛŒ Ø³Ø§ÛŒØª</h2>
                        
                        <div class="tabs">
                            <button class="tab-btn active" data-tab="editIndex">ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ ÙØ§Ø±Ø³ÛŒ</button>
                            <button class="tab-btn" data-tab="editEn">ØµÙØ­Ù‡ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ</button>
                        </div>
                        
                        <div class="tab-content active" id="editIndex">
                            <div class="form-group">
                                <label>ÙˆÛŒØ±Ø§ÛŒØ´ Ù…Ø­ØªÙˆØ§ÛŒ ØµÙØ­Ù‡ ÙØ§Ø±Ø³ÛŒ (HTML)</label>
                                <textarea id="indexContent" class="form-control" rows="15" placeholder="Ù…Ø­ØªÙˆØ§ÛŒ HTML ØµÙØ­Ù‡ ÙØ§Ø±Ø³ÛŒ..."></textarea>
                            </div>
                            <div class="form-actions">
                                <button class="btn btn-success" id="saveIndexContent">Ø°Ø®ÛŒØ±Ù‡ Ù…Ø­Ù„ÛŒ</button>
                                <button class="btn btn-github" id="publishIndexContent">Ø§Ù†ØªØ´Ø§Ø± Ø¯Ø± GitHub</button>
                                <button class="btn btn-primary" id="loadIndexContent">Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§Ø² GitHub</button>
                            </div>
                        </div>
                        
                        <div class="tab-content" id="editEn">
                            <div class="form-group">
                                <label>ÙˆÛŒØ±Ø§ÛŒØ´ Ù…Ø­ØªÙˆØ§ÛŒ ØµÙØ­Ù‡ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ (HTML)</label>
                                <textarea id="enContent" class="form-control" rows="15" placeholder="English page content..."></textarea>
                            </div>
                            <div class="form-actions">
                                <button class="btn btn-success" id="saveEnContent">Ø°Ø®ÛŒØ±Ù‡ Ù…Ø­Ù„ÛŒ</button>
                                <button class="btn btn-github" id="publishEnContent">Ø§Ù†ØªØ´Ø§Ø± Ø¯Ø± GitHub</button>
                                <button class="btn btn-primary" id="loadEnContent">Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§Ø² GitHub</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ========== Ù…Ù‚Ø§Ù„Ø§Øª ========== -->
                <div class="page-section" id="articlesPage">
                    <div class="table-container">
                        <h3>Ù…Ù‚Ø§Ù„Ø§Øª Ù…Ù†ØªØ´Ø± Ø´Ø¯Ù‡</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>Ø¹Ù†ÙˆØ§Ù†</th>
                                    <th>Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</th>
                                    <th>ØªØ§Ø±ÛŒØ®</th>
                                    <th>ÙˆØ¶Ø¹ÛŒØª</th>
                                    <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
                                </tr>
                            </thead>
                            <tbody id="articlesTable"></tbody>
                        </table>
                    </div>
                </div>
                
                <!-- ========== Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ ========== -->
                <div class="page-section" id="booksPage">
                    <div class="table-container">
                        <h3>Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ÛŒ Ù…Ù†ØªØ´Ø± Ø´Ø¯Ù‡</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>Ø¹Ù†ÙˆØ§Ù†</th>
                                    <th>Ù†ÙˆØ¹</th>
                                    <th>Ø³Ø§Ù„</th>
                                    <th>ÙˆØ¶Ø¹ÛŒØª</th>
                                    <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
                                </tr>
                            </thead>
                            <tbody id="booksTable"></tbody>
                        </table>
                    </div>
                </div>
                
                <!-- ========== ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§ ========== -->
                <div class="page-section" id="notesPage">
                    <div class="table-container">
                        <h3>ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§ÛŒ Ø±ÙˆØ²Ø§Ù†Ù‡</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>Ø¹Ù†ÙˆØ§Ù†</th>
                                    <th>ØªØ§Ø±ÛŒØ®</th>
                                    <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
                                </tr>
                            </thead>
                            <tbody id="notesTable"></tbody>
                        </table>
                    </div>
                </div>
                
                <!-- ========== ÙØ±Ø§Ø®ÙˆØ§Ù†â€ŒÙ‡Ø§ ========== -->
                <div class="page-section" id="callsPage">
                    <div class="table-container">
                        <h3>ÙØ±Ø§Ø®ÙˆØ§Ù†â€ŒÙ‡Ø§ÛŒ Ù‡Ù…Ú©Ø§Ø±ÛŒ</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>Ø¹Ù†ÙˆØ§Ù†</th>
                                    <th>ØªØ§Ø±ÛŒØ®</th>
                                    <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
                                </tr>
                            </thead>
                            <tbody id="callsTable"></tbody>
                        </table>
                    </div>
                </div>
                
                <!-- ========== Ø¢Ù…Ø§Ø± ========== -->
                <div class="page-section" id="statsPage">
                    <div class="form-section">
                        <h2><i class="fas fa-chart-bar"></i> Ø¢Ù…Ø§Ø± Ø³Ø§ÛŒØª</h2>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px;">
                            <div class="stat-box">
                                <div style="font-size: 2rem; font-weight: 800; color: var(--primary);" id="statsBooksCount">0</div>
                                <div>Ú©ØªØ§Ø¨</div>
                            </div>
                            <div class="stat-box">
                                <div style="font-size: 2rem; font-weight: 800; color: var(--primary);" id="statsArticlesCount">0</div>
                                <div>Ù…Ù‚Ø§Ù„Ù‡</div>
                            </div>
                            <div class="stat-box">
                                <div style="font-size: 2rem; font-weight: 800; color: var(--primary);" id="statsNotesCount">0</div>
                                <div>ÛŒØ§Ø¯Ø¯Ø§Ø´Øª</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ========== ØªÙ†Ø¸ÛŒÙ…Ø§Øª GitHub ========== -->
                <div class="page-section" id="githubPage">
                    <div class="form-section">
                        <h2><i class="fab fa-github"></i> Ù…Ø¯ÛŒØ±ÛŒØª GitHub</h2>
                        <div class="github-status">
                            <div class="github-status-header">
                                <i class="fab fa-github"></i>
                                <h4>ØªÙ†Ø¸ÛŒÙ…Ø§Øª ÙØ¹Ù„ÛŒ</h4>
                            </div>
                            <div class="github-status-item">
                                <span class="github-status-label">Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ:</span>
                                <span class="github-status-value" id="currentGithubUser">-</span>
                            </div>
                            <div class="github-status-item">
                                <span class="github-status-label">Ø±ÛŒÙ¾Ø§Ø²ÛŒØªÙˆØ±ÛŒ:</span>
                                <span class="github-status-value" id="currentGithubRepo">-</span>
                            </div>
                            <div class="github-status-item">
                                <span class="github-status-label">Ø¢Ø®Ø±ÛŒÙ† Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ:</span>
                                <span class="github-status-value" id="currentLastSync">-</span>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button class="btn btn-github" id="testGithubBtn">ØªØ³Øª Ø§ØªØµØ§Ù„</button>
                            <button class="btn btn-primary" id="syncGithubBtn">Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==================== Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø§ØµÙ„ÛŒ ====================
        let githubConfig = null;
        let githubManager = null;
        let smartContents = { books: [], articles: [], notes: [], calls: [] };

        // ==================== Ú©Ù„Ø§Ø³ Ù…Ø¯ÛŒØ±ÛŒØª GitHub ====================
        class GitHubManager {
            constructor(config) {
                this.config = config;
                this.headers = {
                    'Authorization': `token ${config.token}`,
                    'Accept': 'application/vnd.github.v3+json',
                    'Content-Type': 'application/json'
                };
            }
            
            async testConnection() {
                try {
                    const res = await axios.get(`https://api.github.com/repos/${this.config.username}/${this.config.repo}`, { headers: this.headers });
                    return { success: true, data: res.data };
                } catch (error) {
                    return { success: false, error: error.message };
                }
            }
            
            async getFile(path) {
                try {
                    const res = await axios.get(`https://api.github.com/repos/${this.config.username}/${this.config.repo}/contents/${path}`, { headers: this.headers });
                    return { success: true, content: atob(res.data.content), sha: res.data.sha };
                } catch (error) {
                    return { success: false, error: error.message };
                }
            }
            
            async updateFile(path, content, message) {
                try {
                    let sha = null;
                    try {
                        const existing = await this.getFile(path);
                        if (existing.success) sha = existing.sha;
                    } catch(e) {}
                    
                    const data = {
                        message: message,
                        content: btoa(unescape(encodeURIComponent(content))),
                        branch: this.config.branch
                    };
                    if (sha) data.sha = sha;
                    
                    const res = await axios.put(`https://api.github.com/repos/${this.config.username}/${this.config.repo}/contents/${path}`, data, { headers: this.headers });
                    return { success: true, data: res.data };
                } catch (error) {
                    return { success: false, error: error.message };
                }
            }
        }

        // ==================== Ú©Ù„Ø§Ø³ Ù‡ÙˆØ´Ù…Ù†Ø¯Ø³Ø§Ø² ====================
        class SmartUpdater {
            constructor() {}
            
            // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ú¯Ø§Ù„Ø±ÛŒ Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ Ø¯Ø± index.html
            updateBooksGallery(book) {
                const galleryHTML = `
                    <div class="gallery-item">
                        <div class="gallery-img">
                            <img src="${book.image || 'https://i.postimg.cc/PJZbc5Qd/20240301-203516-(2).jpg'}" alt="${book.title}">
                        </div>
                        <div class="gallery-caption">${book.title}</div>
                    </div>
                `;
                return {
                    selector: '#booksGallery',
                    html: galleryHTML,
                    mode: 'append'
                };
            }
            
            // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø§Ø³Ù„Ø§ÛŒØ¯Ø´Ùˆ Ú©ØªØ§Ø¨â€ŒÙ‡Ø§
            updateBooksSlideshow(book) {
                const slideHTML = `
                    <div class="book-slide">
                        <div class="book-item">
                            <div class="book-cover">
                                <img src="${book.image || 'https://i.postimg.cc/PJZbc5Qd/20240301-203516-(2).jpg'}" alt="${book.title}">
                            </div>
                            <div class="book-info">
                                <div class="book-title">${book.title}</div>
                                <div class="book-desc">${book.description.substring(0, 80)}...</div>
                                <div class="book-status">Ù…Ù†ØªØ´Ø± Ø´Ø¯Ù‡</div>
                            </div>
                        </div>
                    </div>
                `;
                return {
                    selector: '#booksTrack',
                    html: slideHTML,
                    mode: 'append'
                };
            }
            
            // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ú©Ø§Ø±Øª Ù…Ù‚Ø§Ù„Ù‡
            updateArticleCard(article) {
                const date = article.date || new Date().toLocaleDateString('fa-IR', { year: 'numeric', month: 'long', day: 'numeric' });
                const keywords = article.keywords ? article.keywords.split(',').map(k => `<span class="keyword">${k.trim()}</span>`).join('') : '';
                
                const cardHTML = `
                    <div class="research-card shadow-hover fade-in-up">
                        <div class="research-card-header">
                            <h3 class="research-card-title">${article.title}</h3>
                            <div class="research-card-meta">
                                <span class="research-card-date">${date}</span>
                                <span>Ù…Ù‚Ø§Ù„Ù‡ Ø¬Ø¯ÛŒØ¯</span>
                            </div>
                        </div>
                        <div class="research-card-keywords">${keywords}</div>
                        <div class="research-card-body">${article.abstract.substring(0, 150)}...</div>
                        <button class="request-ppt-btn">Ø¯Ø±Ø®ÙˆØ§Ø³Øª ÙØ§ÛŒÙ„ Ø§Ø±Ø§Ø¦Ù‡ (PPT)</button>
                        <div class="research-card-footer">Ù…Ù‚Ø§Ù„Ù‡ Ù‡ÙˆØ´Ù…Ù†Ø¯</div>
                    </div>
                `;
                return {
                    selector: `#${article.category} .research-grid`,
                    html: cardHTML,
                    mode: 'append'
                };
            }
            
            // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ØªØ§ÛŒÙ…â€ŒÙ„Ø§ÛŒÙ† ÛŒØ§Ø¯Ø¯Ø§Ø´Øª
            updateTimeline(note) {
                const date = note.date || new Date().toLocaleDateString('fa-IR', { year: 'numeric', month: 'long', day: 'numeric' });
                const timelineHTML = `
                    <div class="timeline-item">
                        <div class="timeline-date">${date}</div>
                        <div class="timeline-content shadow-hover">
                            <h3>${note.title}</h3>
                            <p>${note.content.substring(0, 200)}...</p>
                            <p><strong>Ù…Ù†Ø¨Ø¹:</strong> Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ù‡ÙˆØ´Ù…Ù†Ø¯</p>
                        </div>
                    </div>
                `;
                return {
                    selector: '.timeline',
                    html: timelineHTML,
                    mode: 'append'
                };
            }
            
            // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ÙØ±Ø§Ø®ÙˆØ§Ù†
            updateCall(call) {
                const callHTML = `
                    <div class="call-card shadow-hover fade-in-up">
                        <div class="call-icon icon-float">ğŸ“¢</div>
                        <h3>${call.title}</h3>
                        <p>${call.description}</p>
                        <div class="call-highlight">${call.highlight || 'ÙØ±Ø§Ø®ÙˆØ§Ù† Ø¬Ø¯ÛŒØ¯'}</div>
                        <button class="call-action-btn show-form-btn">Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª</button>
                    </div>
                `;
                return {
                    selector: '.call-to-action-grid',
                    html: callHTML,
                    mode: 'append'
                };
            }
            
            // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¢Ù…Ø§Ø±
            updateStats(type, count) {
                return {
                    selector: `#stats${type}Count`,
                    html: count.toString(),
                    mode: 'replace'
                };
            }
            
            // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù†ÙˆØ§Ø± Ø¨Ø§Ù„Ø§ÛŒÛŒ
            updateMarquee(text) {
                const marqueeHTML = `<span><i class="fas fa-star"></i> ${text}</span>`;
                return {
                    selector: '.marquee-content',
                    html: marqueeHTML,
                    mode: 'append'
                };
            }
        }

        const smartUpdater = new SmartUpdater();

        // ==================== Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù…Ø­Ù„ÛŒ ====================
        function saveToLocalStorage(key, data) {
            localStorage.setItem(`drrezaei_${key}`, JSON.stringify(data));
        }
        
        function loadFromLocalStorage(key) {
            const data = localStorage.getItem(`drrezaei_${key}`);
            return data ? JSON.parse(data) : null;
        }

        // ==================== Ù†Ù…Ø§ÛŒØ´ Ø§Ø¹Ù„Ø§Ù† ====================
        function showAlert(type, title, message) {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            let icon = type === 'success' ? 'check-circle' : 'exclamation-circle';
            alertDiv.innerHTML = `<i class="fas fa-${icon}"></i><div><strong>${title}</strong><br>${message}</div>`;
            document.getElementById('pageContent').prepend(alertDiv);
            setTimeout(() => alertDiv.remove(), 5000);
        }

        // ==================== Ù…Ø¯ÛŒØ±ÛŒØª ÙˆØ±ÙˆØ¯ ====================
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            if (username === 'admin' && password === 'drrezaei2025') {
                document.getElementById('loginPage').classList.add('hidden');
                document.getElementById('adminPage').style.display = 'block';
                showAlert('success', 'Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯', 'Ù¾Ù†Ù„ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¢Ù…Ø§Ø¯Ù‡ Ú©Ø§Ø± Ø§Ø³Øª');
                loadSavedSettings();
                loadAllTables();
            } else {
                showAlert('error', 'Ø®Ø·Ø§', 'Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ÛŒØ§ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø´ØªØ¨Ø§Ù‡');
            }
        });

        // ==================== Ù…Ø¯ÛŒØ±ÛŒØª ØµÙØ­Ø§Øª ====================
        document.querySelectorAll('.sidebar-menu a').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                if (this.id === 'logoutBtn') {
                    document.getElementById('adminPage').style.display = 'none';
                    document.getElementById('loginPage').classList.remove('hidden');
                    return;
                }
                document.querySelectorAll('.sidebar-menu a').forEach(a => a.classList.remove('active'));
                this.classList.add('active');
                const page = this.getAttribute('data-page');
                showPage(page);
            });
        });

        function showPage(pageId) {
            document.querySelectorAll('.page-section').forEach(s => s.classList.remove('active'));
            const target = document.getElementById(`${pageId}Page`);
            if (target) target.classList.add('active');
            
            const titles = {
                'dashboard': 'Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯', 'smartAdd': 'Ø§ÙØ²ÙˆØ¯Ù† Ù‡ÙˆØ´Ù…Ù†Ø¯', 'editor': 'ÙˆÛŒØ±Ø§ÛŒØ´Ú¯Ø± Ø³Ø§ÛŒØª',
                'articles': 'Ù…Ù‚Ø§Ù„Ø§Øª', 'books': 'Ú©ØªØ§Ø¨â€ŒÙ‡Ø§', 'notes': 'ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§',
                'calls': 'ÙØ±Ø§Ø®ÙˆØ§Ù†â€ŒÙ‡Ø§', 'stats': 'Ø¢Ù…Ø§Ø±', 'github': 'ØªÙ†Ø¸ÛŒÙ…Ø§Øª GitHub'
            };
            document.getElementById('pageTitle').textContent = titles[pageId] || 'Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª';
        }

        // ==================== ØªÙ†Ø¸ÛŒÙ…Ø§Øª GitHub ====================
        function loadSavedSettings() {
            const saved = loadFromLocalStorage('github_config');
            if (saved) {
                githubConfig = saved;
                githubManager = new GitHubManager(saved);
                document.getElementById('currentGithubUser').textContent = saved.username;
                document.getElementById('currentGithubRepo').textContent = saved.repo;
                document.getElementById('githubRepoName').textContent = `${saved.username}/${saved.repo}`;
                document.getElementById('githubConnectionStatus').textContent = 'Ø¢Ù…Ø§Ø¯Ù‡';
                document.getElementById('githubConnectionStatus').className = 'github-status-value connected';
            }
        }

        document.getElementById('configureGithubBtn').addEventListener('click', () => {
            document.getElementById('githubConfigModal').classList.add('active');
        });

        document.getElementById('closeConfigModal').addEventListener('click', () => {
            document.getElementById('githubConfigModal').classList.remove('active');
        });

        document.getElementById('testGithubConnection').addEventListener('click', async () => {
            const token = document.getElementById('githubToken').value;
            const username = document.getElementById('githubUsername').value;
            const repo = document.getElementById('githubRepo').value;
            const branch = document.getElementById('githubBranch').value;
            if (!token || !username || !repo) {
                showAlert('error', 'Ø®Ø·Ø§', 'ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¶Ø±ÙˆØ±ÛŒ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯');
                return;
            }
            const temp = new GitHubManager({ token, username, repo, branch });
            const res = await temp.testConnection();
            if (res.success) showAlert('success', 'Ø§ØªØµØ§Ù„ Ù…ÙˆÙÙ‚', 'Ø¨Ù‡ GitHub Ù…ØªØµÙ„ Ø´Ø¯ÛŒØ¯');
            else showAlert('error', 'Ø®Ø·Ø§', 'Ø§ØªØµØ§Ù„ Ø¨Ø±Ù‚Ø±Ø§Ø± Ù†Ø´Ø¯');
        });

        document.getElementById('saveGithubConfig').addEventListener('click', () => {
            githubConfig = {
                token: document.getElementById('githubToken').value,
                username: document.getElementById('githubUsername').value,
                repo: document.getElementById('githubRepo').value,
                branch: document.getElementById('githubBranch').value || 'main',
                pathFa: document.getElementById('githubPathFa').value || 'index.html',
                pathEn: document.getElementById('githubPathEn').value || 'en.html'
            };
            saveToLocalStorage('github_config', githubConfig);
            githubManager = new GitHubManager(githubConfig);
            document.getElementById('githubConfigModal').classList.remove('active');
            document.getElementById('currentGithubUser').textContent = githubConfig.username;
            document.getElementById('currentGithubRepo').textContent = githubConfig.repo;
            document.getElementById('githubRepoName').textContent = `${githubConfig.username}/${githubConfig.repo}`;
            document.getElementById('githubConnectionStatus').textContent = 'Ù…ØªØµÙ„';
            document.getElementById('githubConnectionStatus').className = 'github-status-value connected';
            document.getElementById('currentLastSync').textContent = new Date().toLocaleTimeString('fa-IR');
            showAlert('success', 'Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯', 'ØªÙ†Ø¸ÛŒÙ…Ø§Øª GitHub Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯');
        });

        // ==================== Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¬Ø¯Ø§ÙˆÙ„ ====================
        function loadAllTables() {
            loadBooksTable();
            loadArticlesTable();
            loadNotesTable();
            loadCallsTable();
            updateStatsDisplay();
        }

        function loadBooksTable() {
            const books = loadFromLocalStorage('books') || [];
            smartContents.books = books;
            const tbody = document.getElementById('booksTable');
            if (!tbody) return;
            
            if (books.length === 0) {
                tbody.innerHTML = '<tr><td colspan="5" style="text-align:center; padding:30px;">Ù‡ÛŒÚ† Ú©ØªØ§Ø¨ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</td></tr>';
                return;
            }
            
            tbody.innerHTML = books.map((b, i) => `
                <tr>
                    <td>${b.title}</td>
                    <td>${b.type}</td>
                    <td>${b.year || '1403'}</td>
                    <td><span class="status published">Ù…Ù†ØªØ´Ø± Ø´Ø¯Ù‡</span></td>
                    <td><div class="actions">
                        <button class="btn btn-sm btn-primary" onclick="alert('${b.description}')"><i class="fas fa-eye"></i></button>
                        <button class="btn btn-sm btn-danger" onclick="deleteItem('books', ${i})"><i class="fas fa-trash"></i></button>
                    </div></td>
                </tr>
            `).join('');
            
            document.getElementById('statsBooksCount').textContent = books.length;
        }

        function loadArticlesTable() {
            const articles = loadFromLocalStorage('articles') || [];
            smartContents.articles = articles;
            const tbody = document.getElementById('articlesTable');
            if (!tbody) return;
            
            if (articles.length === 0) {
                tbody.innerHTML = '<tr><td colspan="5" style="text-align:center; padding:30px;">Ù‡ÛŒÚ† Ù…Ù‚Ø§Ù„Ù‡â€ŒØ§ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</td></tr>';
                return;
            }
            
            tbody.innerHTML = articles.map((a, i) => `
                <tr>
                    <td>${a.title}</td>
                    <td>${getCategoryName(a.category)}</td>
                    <td>${a.date || 'Û±Û´Û°Û³/Û±Û±/Û²Û³'}</td>
                    <td><span class="status published">Ù…Ù†ØªØ´Ø± Ø´Ø¯Ù‡</span></td>
                    <td><div class="actions">
                        <button class="btn btn-sm btn-primary" onclick="alert('${a.abstract}')"><i class="fas fa-eye"></i></button>
                        <button class="btn btn-sm btn-danger" onclick="deleteItem('articles', ${i})"><i class="fas fa-trash"></i></button>
                    </div></td>
                </tr>
            `).join('');
            
            document.getElementById('statsArticlesCount').textContent = articles.length;
        }

        function loadNotesTable() {
            const notes = loadFromLocalStorage('notes') || [];
            smartContents.notes = notes;
            const tbody = document.getElementById('notesTable');
            if (!tbody) return;
            
            if (notes.length === 0) {
                tbody.innerHTML = '<tr><td colspan="3" style="text-align:center; padding:30px;">Ù‡ÛŒÚ† ÛŒØ§Ø¯Ø¯Ø§Ø´ØªÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</td></tr>';
                return;
            }
            
            tbody.innerHTML = notes.map((n, i) => `
                <tr>
                    <td>${n.title}</td>
                    <td>${n.date || 'Û±Û´Û°Û³/Û±Û±/Û²Û³'}</td>
                    <td><div class="actions">
                        <button class="btn btn-sm btn-primary" onclick="alert('${n.content}')"><i class="fas fa-eye"></i></button>
                        <button class="btn btn-sm btn-danger" onclick="deleteItem('notes', ${i})"><i class="fas fa-trash"></i></button>
                    </div></td>
                </tr>
            `).join('');
            
            document.getElementById('statsNotesCount').textContent = notes.length;
        }

        function loadCallsTable() {
            const calls = loadFromLocalStorage('calls') || [];
            smartContents.calls = calls;
            const tbody = document.getElementById('callsTable');
            if (!tbody) return;
            
            if (calls.length === 0) {
                tbody.innerHTML = '<tr><td colspan="3" style="text-align:center; padding:30px;">Ù‡ÛŒÚ† ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</td></tr>';
                return;
            }
            
            tbody.innerHTML = calls.map((c, i) => `
                <tr>
                    <td>${c.title}</td>
                    <td>${new Date().toLocaleDateString('fa-IR')}</td>
                    <td><div class="actions">
                        <button class="btn btn-sm btn-primary" onclick="alert('${c.description}')"><i class="fas fa-eye"></i></button>
                        <button class="btn btn-sm btn-danger" onclick="deleteItem('calls', ${i})"><i class="fas fa-trash"></i></button>
                    </div></td>
                </tr>
            `).join('');
        }

        function getCategoryName(cat) {
            const names = { tab1: 'Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ', tab2: 'ØªØ­ÙˆÙ„ Ø³Ø§Ø²Ù…Ø§Ù†ÛŒ', tab3: 'Ù…Ù‡Ù†Ø¯Ø³ÛŒ ÙØ±Ù‡Ù†Ú¯ÛŒ', tab4: 'Ù†Ø¸Ø±ÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ø´Ù†Ø§Ø®ØªÛŒ' };
            return names[cat] || cat;
        }

        function deleteItem(type, index) {
            if (!confirm('Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ø¢ÛŒØªÙ… Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ')) return;
            const items = loadFromLocalStorage(type) || [];
            items.splice(index, 1);
            saveToLocalStorage(type, items);
            loadAllTables();
            showAlert('success', 'Ø­Ø°Ù Ø´Ø¯', 'Ø¢ÛŒØªÙ… Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø­Ø°Ù Ø´Ø¯');
        }

        function updateStatsDisplay() {
            const books = loadFromLocalStorage('books') || [];
            const articles = loadFromLocalStorage('articles') || [];
            const notes = loadFromLocalStorage('notes') || [];
            document.getElementById('statsBooksCount').textContent = books.length;
            document.getElementById('statsArticlesCount').textContent = articles.length;
            document.getElementById('statsNotesCount').textContent = notes.length;
        }

        // ==================== Ø§Ù†ØªØ´Ø§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ Ú©ØªØ§Ø¨ ====================
        document.getElementById('smartPublishBookBtn').addEventListener('click', async function() {
            const book = {
                title: document.getElementById('smartBookTitle').value,
                type: document.getElementById('smartBookType').value,
                description: document.getElementById('smartBookDesc').value,
                year: document.getElementById('smartBookYear').value,
                image: document.getElementById('smartBookImage').value || 'https://i.postimg.cc/PJZbc5Qd/20240301-203516-(2).jpg'
            };
            
            if (!book.title || !book.description) {
                showAlert('error', 'Ø®Ø·Ø§', 'Ø¹Ù†ÙˆØ§Ù† Ùˆ ØªÙˆØ¶ÛŒØ­ Ú©ØªØ§Ø¨ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            // 1. Ø°Ø®ÛŒØ±Ù‡ Ù…Ø­Ù„ÛŒ
            let books = loadFromLocalStorage('books') || [];
            books.push({ ...book, id: Date.now() });
            saveToLocalStorage('books', books);
            
            // 2. Ø¢Ù¾Ø¯ÛŒØª Ø¬Ø¯ÙˆÙ„ Ùˆ Ø¢Ù…Ø§Ø±
            loadBooksTable();
            
            // 3. Ø³Ø§Ø®Øª Ù…Ø­ØªÙˆØ§ÛŒ HTML Ø¨Ø±Ø§ÛŒ index.html
            let indexHTML = '';
            
            // Ú¯Ø§Ù„Ø±ÛŒ
            const galleryUpdate = smartUpdater.updateBooksGallery(book);
            indexHTML += `\n<!-- Ú©ØªØ§Ø¨ Ø¬Ø¯ÛŒØ¯: ${book.title} -->\n${galleryUpdate.html}`;
            
            // Ø§Ø³Ù„Ø§ÛŒØ¯Ø´Ùˆ
            const slideUpdate = smartUpdater.updateBooksSlideshow(book);
            indexHTML += `\n${slideUpdate.html}`;
            
            // 4. Ø§Ù†ØªØ´Ø§Ø± Ø¯Ø± GitHub Ø§Ú¯Ø± Ù…ØªØµÙ„ Ø§Ø³Øª
            if (githubManager) {
                try {
                    const indexResult = await githubManager.getFile('index.html');
                    if (indexResult.success) {
                        let content = indexResult.content;
                        
                        // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¨Ù‡ Ú¯Ø§Ù„Ø±ÛŒ
                        if (content.includes('id="booksGallery"')) {
                            const galleryPos = content.indexOf('id="booksGallery"');
                            const closeTag = content.indexOf('</div>', galleryPos);
                            if (closeTag !== -1) {
                                content = content.substring(0, closeTag) + galleryUpdate.html + content.substring(closeTag);
                            }
                        }
                        
                        // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¨Ù‡ Ø§Ø³Ù„Ø§ÛŒØ¯Ø´Ùˆ
                        if (content.includes('id="booksTrack"')) {
                            const trackPos = content.indexOf('id="booksTrack"');
                            const closeDiv = content.indexOf('</div>', trackPos);
                            if (closeDiv !== -1) {
                                content = content.substring(0, closeDiv) + slideUpdate.html + content.substring(closeDiv);
                            }
                        }
                        
                        await githubManager.updateFile('index.html', content, `Ú©ØªØ§Ø¨ Ø¬Ø¯ÛŒØ¯: ${book.title}`);
                        showAlert('success', 'âœ… Ú©ØªØ§Ø¨ Ù…Ù†ØªØ´Ø± Ø´Ø¯', 'Ú©ØªØ§Ø¨ Ø¨Ù‡ Ø³Ø§ÛŒØª Ø§Ø¶Ø§ÙÙ‡ Ùˆ Ø¯Ø± GitHub Ù…Ù†ØªØ´Ø± Ø´Ø¯');
                    }
                } catch (error) {
                    showAlert('warning', 'âš ï¸ Ú©ØªØ§Ø¨ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯', 'Ú©ØªØ§Ø¨ Ø¯Ø± Ù¾Ù†Ù„ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯ Ø§Ù…Ø§ Ø§Ù†ØªØ´Ø§Ø± Ø¯Ø± GitHub Ø§Ù†Ø¬Ø§Ù… Ù†Ø´Ø¯');
                }
            } else {
                showAlert('success', 'âœ… Ú©ØªØ§Ø¨ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯', 'Ú©ØªØ§Ø¨ Ø¯Ø± Ù¾Ù†Ù„ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯ (Ø§ØªØµØ§Ù„ GitHub Ø¨Ø±Ù‚Ø±Ø§Ø± Ù†ÛŒØ³Øª)');
            }
            
            // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ÙØ±Ù…
            document.getElementById('smartBookTitle').value = '';
            document.getElementById('smartBookDesc').value = '';
            document.getElementById('smartBookImage').value = '';
            document.getElementById('smartBookYear').value = '1403';
        });

        // ==================== Ø§Ù†ØªØ´Ø§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù…Ù‚Ø§Ù„Ù‡ ====================
        document.getElementById('smartPublishArticleBtn').addEventListener('click', async function() {
            const article = {
                title: document.getElementById('smartArticleTitle').value,
                category: document.getElementById('smartArticleCategory').value,
                date: document.getElementById('smartArticleDate').value || new Date().toLocaleDateString('fa-IR'),
                keywords: document.getElementById('smartArticleKeywords').value,
                abstract: document.getElementById('smartArticleAbstract').value
            };
            
            if (!article.title || !article.abstract) {
                showAlert('error', 'Ø®Ø·Ø§', 'Ø¹Ù†ÙˆØ§Ù† Ùˆ Ú†Ú©ÛŒØ¯Ù‡ Ù…Ù‚Ø§Ù„Ù‡ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            // Ø°Ø®ÛŒØ±Ù‡ Ù…Ø­Ù„ÛŒ
            let articles = loadFromLocalStorage('articles') || [];
            articles.push({ ...article, id: Date.now() });
            saveToLocalStorage('articles', articles);
            loadArticlesTable();
            
            // Ø³Ø§Ø®Øª Ú©Ø§Ø±Øª Ù…Ù‚Ø§Ù„Ù‡
            const cardUpdate = smartUpdater.updateArticleCard(article);
            
            // Ø§Ù†ØªØ´Ø§Ø± Ø¯Ø± GitHub
            if (githubManager) {
                try {
                    const indexResult = await githubManager.getFile('index.html');
                    if (indexResult.success) {
                        let content = indexResult.content;
                        const tabId = article.category;
                        
                        if (content.includes(`id="${tabId}"`)) {
                            const tabPos = content.indexOf(`id="${tabId}"`);
                            const gridPos = content.indexOf('research-grid', tabPos);
                            const gridClose = content.indexOf('</div>', gridPos);
                            
                            if (gridPos !== -1 && gridClose !== -1) {
                                content = content.substring(0, gridClose) + cardUpdate.html + content.substring(gridClose);
                            }
                        }
                        
                        await githubManager.updateFile('index.html', content, `Ù…Ù‚Ø§Ù„Ù‡ Ø¬Ø¯ÛŒØ¯: ${article.title}`);
                        showAlert('success', 'âœ… Ù…Ù‚Ø§Ù„Ù‡ Ù…Ù†ØªØ´Ø± Ø´Ø¯', 'Ù…Ù‚Ø§Ù„Ù‡ Ø¨Ù‡ Ø³Ø§ÛŒØª Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯');
                    }
                } catch (error) {
                    showAlert('warning', 'âš ï¸ Ù…Ù‚Ø§Ù„Ù‡ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯', 'Ù…Ù‚Ø§Ù„Ù‡ Ø¯Ø± Ù¾Ù†Ù„ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯');
                }
            } else {
                showAlert('success', 'âœ… Ù…Ù‚Ø§Ù„Ù‡ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯', 'Ù…Ù‚Ø§Ù„Ù‡ Ø¯Ø± Ù¾Ù†Ù„ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯');
            }
            
            // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ÙØ±Ù…
            document.getElementById('smartArticleTitle').value = '';
            document.getElementById('smartArticleKeywords').value = '';
            document.getElementById('smartArticleAbstract').value = '';
            document.getElementById('smartArticleDate').value = '';
        });

        // ==================== Ø§Ù†ØªØ´Ø§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ ÛŒØ§Ø¯Ø¯Ø§Ø´Øª ====================
        document.getElementById('smartPublishNoteBtn').addEventListener('click', async function() {
            const note = {
                title: document.getElementById('smartNoteTitle').value,
                date: document.getElementById('smartNoteDate').value || new Date().toLocaleDateString('fa-IR'),
                content: document.getElementById('smartNoteContent').value
            };
            
            if (!note.title || !note.content) {
                showAlert('error', 'Ø®Ø·Ø§', 'Ø¹Ù†ÙˆØ§Ù† Ùˆ Ù…ØªÙ† ÛŒØ§Ø¯Ø¯Ø§Ø´Øª Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            // Ø°Ø®ÛŒØ±Ù‡ Ù…Ø­Ù„ÛŒ
            let notes = loadFromLocalStorage('notes') || [];
            notes.push({ ...note, id: Date.now() });
            saveToLocalStorage('notes', notes);
            loadNotesTable();
            
            const timelineUpdate = smartUpdater.updateTimeline(note);
            
            if (githubManager) {
                try {
                    const indexResult = await githubManager.getFile('index.html');
                    if (indexResult.success) {
                        let content = indexResult.content;
                        if (content.includes('class="timeline"')) {
                            const timelinePos = content.indexOf('class="timeline"');
                            const timelineClose = content.indexOf('</div>', content.indexOf('</div>', timelinePos) + 1);
                            if (timelineClose !== -1) {
                                content = content.substring(0, timelineClose) + timelineUpdate.html + content.substring(timelineClose);
                            }
                        }
                        await githubManager.updateFile('index.html', content, `ÛŒØ§Ø¯Ø¯Ø§Ø´Øª Ø¬Ø¯ÛŒØ¯: ${note.title}`);
                        showAlert('success', 'âœ… ÛŒØ§Ø¯Ø¯Ø§Ø´Øª Ù…Ù†ØªØ´Ø± Ø´Ø¯');
                    }
                } catch (error) {
                    showAlert('warning', 'âš ï¸ ÛŒØ§Ø¯Ø¯Ø§Ø´Øª Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯');
                }
            } else {
                showAlert('success', 'âœ… ÛŒØ§Ø¯Ø¯Ø§Ø´Øª Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯');
            }
            
            document.getElementById('smartNoteTitle').value = '';
            document.getElementById('smartNoteContent').value = '';
            document.getElementById('smartNoteDate').value = '';
        });

        // ==================== Ø§Ù†ØªØ´Ø§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ ÙØ±Ø§Ø®ÙˆØ§Ù† ====================
        document.getElementById('smartPublishCallBtn').addEventListener('click', async function() {
            const call = {
                title: document.getElementById('smartCallTitle').value,
                description: document.getElementById('smartCallDesc').value,
                highlight: document.getElementById('smartCallHighlight').value || 'ÙØ±Ø§Ø®ÙˆØ§Ù† Ø¬Ø¯ÛŒØ¯'
            };
            
            if (!call.title || !call.description) {
                showAlert('error', 'Ø®Ø·Ø§', 'Ø¹Ù†ÙˆØ§Ù† Ùˆ Ù…ØªÙ† ÙØ±Ø§Ø®ÙˆØ§Ù† Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            let calls = loadFromLocalStorage('calls') || [];
            calls.push({ ...call, id: Date.now() });
            saveToLocalStorage('calls', calls);
            loadCallsTable();
            
            const callUpdate = smartUpdater.updateCall(call);
            
            if (githubManager) {
                try {
                    const indexResult = await githubManager.getFile('index.html');
                    if (indexResult.success) {
                        let content = indexResult.content;
                        if (content.includes('class="call-to-action-grid"')) {
                            const gridPos = content.indexOf('class="call-to-action-grid"');
                            const gridClose = content.indexOf('</div>', content.indexOf('</div>', gridPos) + 1);
                            if (gridClose !== -1) {
                                content = content.substring(0, gridClose) + callUpdate.html + content.substring(gridClose);
                            }
                        }
                        await githubManager.updateFile('index.html', content, `ÙØ±Ø§Ø®ÙˆØ§Ù† Ø¬Ø¯ÛŒØ¯: ${call.title}`);
                        showAlert('success', 'âœ… ÙØ±Ø§Ø®ÙˆØ§Ù† Ù…Ù†ØªØ´Ø± Ø´Ø¯');
                    }
                } catch (error) {
                    showAlert('warning', 'âš ï¸ ÙØ±Ø§Ø®ÙˆØ§Ù† Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯');
                }
            } else {
                showAlert('success', 'âœ… ÙØ±Ø§Ø®ÙˆØ§Ù† Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯');
            }
            
            document.getElementById('smartCallTitle').value = '';
            document.getElementById('smartCallDesc').value = '';
            document.getElementById('smartCallHighlight').value = '';
        });

        // ==================== ÙˆÛŒØ±Ø§ÛŒØ´Ú¯Ø± Ø³Ø§ÛŒØª ====================
        document.getElementById('loadIndexContent').addEventListener('click', async () => {
            if (!githubManager) { showAlert('error', 'Ø®Ø·Ø§', 'Ø§Ø¨ØªØ¯Ø§ GitHub Ø±Ø§ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯'); return; }
            const path = githubConfig.pathFa || 'index.html';
            const res = await githubManager.getFile(path);
            if (res.success) {
                document.getElementById('indexContent').value = res.content;
                showAlert('success', 'Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯', 'Ù…Ø­ØªÙˆØ§ÛŒ ØµÙØ­Ù‡ ÙØ§Ø±Ø³ÛŒ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯');
            } else showAlert('error', 'Ø®Ø·Ø§', 'Ù…Ø´Ú©Ù„ÛŒ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø­ØªÙˆØ§ Ù¾ÛŒØ´ Ø¢Ù…Ø¯');
        });

        document.getElementById('publishIndexContent').addEventListener('click', async () => {
            if (!githubManager) { showAlert('error', 'Ø®Ø·Ø§', 'Ø§Ø¨ØªØ¯Ø§ GitHub Ø±Ø§ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯'); return; }
            const content = document.getElementById('indexContent').value;
            if (!content) { showAlert('error', 'Ø®Ø·Ø§', 'Ù…Ø­ØªÙˆØ§ÛŒÛŒ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯'); return; }
            const res = await githubManager.updateFile(githubConfig.pathFa || 'index.html', content, 'Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ØµÙØ­Ù‡ ÙØ§Ø±Ø³ÛŒ');
            if (res.success) {
                showAlert('success', 'ØµÙØ­Ù‡ Ù…Ù†ØªØ´Ø± Ø´Ø¯', 'ØµÙØ­Ù‡ ÙØ§Ø±Ø³ÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯');
                document.getElementById('githubLastPublish').textContent = new Date().toLocaleTimeString('fa-IR');
            } else showAlert('error', 'Ø®Ø·Ø§', 'Ù…Ø´Ú©Ù„ÛŒ Ø¯Ø± Ø§Ù†ØªØ´Ø§Ø± ØµÙØ­Ù‡ Ù¾ÛŒØ´ Ø¢Ù…Ø¯');
        });

        // ==================== Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ø³Ø§ÛŒØª ====================
        document.getElementById('previewSiteBtn').addEventListener('click', () => {
            if (githubConfig) {
                window.open(`https://${githubConfig.username}.github.io/${githubConfig.repo.replace('.github.io', '')}`, '_blank');
            } else showAlert('error', 'Ø®Ø·Ø§', 'Ø§Ø¨ØªØ¯Ø§ ØªÙ†Ø¸ÛŒÙ…Ø§Øª GitHub Ø±Ø§ Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡ÛŒØ¯');
        });

        // ==================== Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ ====================
        window.addEventListener('DOMContentLoaded', () => {
            loadSavedSettings();
            loadAllTables();
            
            // ØªØ§Ø±ÛŒØ® Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø¨Ø±Ø§ÛŒ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ ØªØ§Ø±ÛŒØ®
            const today = new Date().toISOString().split('T')[0];
            document.querySelectorAll('input[type="date"]').forEach(input => {
                if (!input.value) input.value = today;
            });
        });

        // ØªÙˆØ§Ø¨Ø¹ Ø³Ø±Ø§Ø³Ø±ÛŒ Ø¨Ø±Ø§ÛŒ Ø­Ø°Ù
        window.deleteItem = deleteItem;
    </script>
</body>
</html>
